---
Title: "ICE Geography"
---

ICE Area of Responsibility and Field Office Map

```{r, dev = 'svg', dev.args=list(bg="transparent")}

library(tidyverse)
library(ggplot2)
library(sf)
library(ggrepel)
# library(svglite)
library(rmapshaper)
library(sfarrow)

temp_file <- tempfile(fileext = ".feather")

url <- "https://github.com/deportationdata/ice/raw/refs/heads/main/data/ice_aor_map_data.feather"
download.file(url, temp_file, mode = "wb")

map_data <- st_read_feather(temp_file)
# map_data <- ms_simplify(map_data, keep = 0.05, keep_shapes = TRUE)

url <- "https://github.com/deportationdata/ice/raw/refs/heads/main/data/ice_field_offices_geocoded.feather"
download.file(url, temp_file, mode = "wb")

field_offices <- st_read_feather(temp_file)
office_labels <- field_offices %>%
  filter(aor != "HQ")

colors <- c("#4B5FFF", "#1FFBFF", "#FF2F16", "#863AE4", "#D14D9A", "#63B6FB",
            "#A51FFF", "#E9EC32", "#F9246B", "#66B7B2", "#FFD21F", "#4B1FFF", "#FF5F16", "#F9C424",
            "#E8FE20", "#FF1FD2", "#5974C5", "#4ED06A", "#10CBF8", "#66FF1F", "#D61FFF",
            "#1FFF9E", "#FFCB1F", "#5DC658", "#4C1F9F")
color_map <- setNames(colors, sort(unique(map_data$aor)))

map <- map_data %>%
  group_by(aor) %>%
  summarise(geometry = st_union(geometry), .groups = "drop")

territory_labels <- map_data %>%
  filter(STUSPS %in% c("GU", "PR", "VI", "MP")) %>%
  mutate(label_point = st_point_on_surface(geometry) + c(0, -175000)) %>%
  st_set_geometry("label_point") %>%
  st_set_crs(st_crs(map_data)) %>% 
  mutate(y = st_coordinates(label_point)[, 2]) %>%
  group_by(STUSPS) %>%
  slice_max(order_by = y, n = 1, with_ties = FALSE) %>%
  ungroup()

territory_labels$NAME <- c("Guam", "N. Mariana Islands", "Puerto Rico", "U.S. Virgin Islands")

p <-
  ggplot(map) +
  geom_sf(aes(fill = aor), color = NA, linewidth = 0) +
  geom_sf_text(data = territory_labels, aes(label = NAME), size = 2) +
  geom_sf(data = office_labels, color = "black", linewidth = 1) +
  geom_label_repel(
    data = office_labels,
    aes(geometry = geometry, label = aor),
    fill = alpha(c("white"),0.75),
    color = "black",
    stat = "sf_coordinates",
    min.segment.length = 0,
    size = 2,
    seed = 42 
  ) +
  labs(fill = "Area of Responsibility") +
  scale_fill_manual(values = color_map, na.value = "grey90") +
  theme_void() +
  theme(
    panel.background = element_rect(fill = "transparent", color = NA),
    plot.background = element_rect(fill = "transparent", color = NA)
  )

p

```

ICE Field Office Locations

```{r}
tibble::tribble(
  ~`Area of Responsibility`, ~`AOR Abbreviation`, ~Address,
  "Atlanta", "ATL", "180 Ted Turner Dr. SW, Suite 522, Atlanta, GA 30303",
  "Baltimore", "BAL", "31 Hopkins Plaza 6th Floor Baltimore, MD 21201",
  "Boston", "BOS", "1000 District Avenue Burlington, MA 01803",
  "Buffalo", "BUF", "250 Delaware Avenue, Floor 7 Buffalo, NY 14202",
  "Chicago", "CHI", "101 W Ida B Wells Drive Suite 4000 Chicago, IL 60605",
  "Dallas", "DAL", "8101 N. Stemmons Frwy Dallas, TX 75247",
  "Denver", "DEN", "12445 E. Caley Avenue Centennial, CO 80111",
  "Detroit", "DET", "333 Mt. Elliott St Detroit, MI 48207",
  "El Paso", "ELP", "11541 Montana Ave Suite E El Paso, TX 79936",
  "Harlingen", "HAL", "1717 Zoy Street, Harlingen, TX 78552",
  "Houston", "HOU", "126 Northpoint Drive Houston, TX 77060",
  "HQ", "HQ", "500 12th Street, SW, Washington, D.C. 20536",
  "Los Angeles", "LOS", "300 North Los Angeles St. Room 7631 Los Angeles, CA 90012",
  "Miami", "MIA", "865 SW 78th Avenue Suite 101 Plantation, FL 33324",
  "Newark", "NEW", "970 Broad St. 11th Floor Newark, NJ 07102",
  "New Orleans", "NOL", "1250 Poydras Suite 325 New Orleans, LA 70113",
  "New York City", "NYC", "26 Federal Plaza 9th Floor, Suite 9-110 New York, NY 10278",
  "Philadelphia", "PHI", "114 North 8th Street Philadelphia, PA 19107",
  "Phoenix", "PHO", "2035 N. Central Avenue Phoenix, AZ 85004",
  "Seattle", "SEA", "12500 Tukwila International Boulevard Seattle, WA 98168",
  "San Francisco", "SFR", "630 Sansome Street Rm 590 San Francisco, CA 94111",
  "Salt Lake City", "SLC", "2975 Decker Lake Drive Suite 100 West Valley City, UT 84119-6096",
  "San Antonio", "SNA", "1777 NE Loop 410 Floor 15 San Antonio, TX 78217",
  "San Diego", "SND", "880 Front Street #2242 San Diego, CA 92101",
  "St. Paul", "SPM", "1 Federal Drive Suite 1601 Fort Snelling, MN 55111",
  "Washington", "WAS", "14797 Murdock Street Chantilly, VA 20151"
) |> 
  arrange(`AOR Abbreviation`) |> 
  reactable(
    columns = list(
    Name = colDef(minWidth = 100),
    Description = colDef(minWidth = 200, sortable = FALSE)), # set id anchor for linking
  pagination = FALSE,
  striped = TRUE,
  fullWidth = TRUE,
  theme = reactableTheme(
    tableStyle  = list(backgroundColor = "transparent"),
    headerStyle = list(backgroundColor = "transparent")
  )
)
```
