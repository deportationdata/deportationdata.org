---
title: "Data documentation from ICE"
---

```{r}
library(tidyverse)
library(reactable)
library(glue)

options(
  reactable.theme = reactableTheme(
    backgroundColor = "#F4F6F7"
  )
)

# Store the data frame to access in cell functions
library(googlesheets4)
gs4_deauth()
doc_data <- read_sheet(
  "https://docs.google.com/spreadsheets/d/1Acckm7h-Hs690Tv6bvtKEg_9L2yITqp0QqN5hN2dhWw/edit?gid=0#gid=0"
)

doc_data |>
  filter(Agency == "DOJ EOIR") |>
  select(Title, Description, Date, Contributor) |>
  reactable(
    columns = list(
      Title = colDef(
        name = "Document",
        cell = function(value, index) {
          url <- doc_data$Filename[index]
          if (is.null(url) || is.na(url) || url == "") {
            return(value)
          }
          htmltools::tags$a(href = url, target = "_blank", value)
        }
      ),
      Date = colDef(
        name = "Date"
      ),
      Contributor = colDef(
        name = "Source",
        cell = function(value, index) {
          source_url <- "test" #doc_data$source_url[index]
          if (is.null(source_url) || is.na(source_url) || source_url == "") {
            return(value)
          }
          htmltools::tags$a(href = source_url, target = "_blank", value)
        }
      )
    )
  )
```